import{s as I,_ as k,u as E,a as C,b as F,r as n,o as S,w as q,c as B,d as R,e as r,f as o,g as a,E as U,h as w,i as $,j as K,k as N,l as M,m as j,n as A,p as L,q as T}from"./index-420c1784.js";function z(){return I({url:"/code",method:"get"})}const D=d=>(L("data-v-02ef35bb"),d=d(),T(),d),G={class:"login-container"},H={class:"login-img"},J=D(()=>r("div",{class:"title-container"},[r("h3",{class:"title"},"后台管理系统")],-1)),O=["src"],P={__name:"index",setup(d){const y=E(),b=C(),h=F(),g=n(),s=n({username:"",password:"",codeId:"",code:""}),v=n(),i=n(!1),f=n();S(()=>c());const p=async()=>{await g.value.validate(),i.value=!0;try{await h.login(s.value),b.push({path:f.value||"/"})}finally{c(),i.value=!1}},c=async()=>{const{data:l}=await z();s.value.codeId=l.id,v.value=l.image};return q(()=>y.query,l=>{f.value=l&&l.redirect},{immediate:!0}),(l,e)=>{const u=N,m=M,_=j,V=A,x=U;return B(),R("div",G,[r("div",H,[o(u,{"icon-class":"login",style:{height:"100%",width:"100%"}})]),o(x,{ref_key:"loginFormRef",ref:g,model:s.value,class:"login-form","label-position":"left"},{default:a(()=>[J,o(_,{prop:"username",rules:{required:!0,trigger:"blur",message:"请输入用户名"}},{default:a(()=>[o(m,{modelValue:s.value.username,"onUpdate:modelValue":e[0]||(e[0]=t=>s.value.username=t),placeholder:"用户名"},{prepend:a(()=>[o(u,{"icon-class":"user"})]),_:1},8,["modelValue"])]),_:1}),o(_,{prop:"password",rules:{required:!0,trigger:"blur",min:6,message:"长度至少为6位"}},{default:a(()=>[o(m,{modelValue:s.value.password,"onUpdate:modelValue":e[1]||(e[1]=t=>s.value.password=t),type:"password",placeholder:"密码","show-password":"",onKeyup:e[2]||(e[2]=w(t=>p(),["enter"]))},{prepend:a(()=>[o(u,{"icon-class":"password"})]),_:1},8,["modelValue"])]),_:1}),o(_,{prop:"code",rules:{required:!0,trigger:"blur",len:4,message:"请输入正确的验证码长度"}},{default:a(()=>[o(m,{modelValue:s.value.code,"onUpdate:modelValue":e[3]||(e[3]=t=>s.value.code=t),placeholder:"验证码",onKeyup:e[4]||(e[4]=w(t=>p(),["enter"]))},{prepend:a(()=>[o(u,{"icon-class":"verify"})]),_:1},8,["modelValue"]),r("span",{class:"show-virify",onClick:e[5]||(e[5]=t=>c())},[r("img",{src:v.value},null,8,O)])]),_:1}),o(V,{loading:i.value,type:"primary",style:{width:"100%","margin-bottom":"30px"},onClick:e[6]||(e[6]=$(t=>p(),["prevent"]))},{default:a(()=>[K("登录")]),_:1},8,["loading"])]),_:1},8,["model"])])}}},W=k(P,[["__scopeId","data-v-02ef35bb"]]);export{W as default};
